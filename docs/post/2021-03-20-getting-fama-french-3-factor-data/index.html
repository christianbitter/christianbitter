<!doctype html>
<html lang="en-us">
  <head>
    <title>Getting Fama French 3 Factor Data // Christian Bitter</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.81.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Christian Bitter" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="../../css/main.min.88e7083eff65effb7485b6e6f38d10afbec25093a6fac42d734ce9024d3defbd.css" />

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-39601084-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Getting Fama French 3 Factor Data"/>
<meta name="twitter:description" content="When analyzing and making investments we typically have to face a trade-off between how much risk (or uncertainty) we are going to allow to affect our investment, and how strong our appetite for gains or returns is. Typically, we know that an investment that has larger swings in either positive or negative direction and an investment that has more of such swings is an investment that we would consider as being riskier when compared to an investment that stays flatter overall (e."/>

    <meta property="og:title" content="Getting Fama French 3 Factor Data" />
<meta property="og:description" content="When analyzing and making investments we typically have to face a trade-off between how much risk (or uncertainty) we are going to allow to affect our investment, and how strong our appetite for gains or returns is. Typically, we know that an investment that has larger swings in either positive or negative direction and an investment that has more of such swings is an investment that we would consider as being riskier when compared to an investment that stays flatter overall (e." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/2021-03-20-getting-fama-french-3-factor-data/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-03-20T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-03-20T00:00:00&#43;00:00" />


    
    
    <style>
      ul.menu {
        list-style-type: none;
        margin: 0;
        padding: 0;
      }
      
      ul.meu li {
        border-left: 10px solid #666;
        border-bottom: 1px solid #666;
      }      
    </style>

  </head>
  <body>
    <header class="app-header">
      <a href="../../"><img class="app-header-avatar" src="../../avatar.jpg" alt="Christian Bitter" /></a>
      <h1>Christian Bitter</h1>
      <p>I am a Business Intelligence Leader, full-stack Data Scientist in the digital Agriculture space. I am always on the look-out to use data and digital technology to deliver value that can profoundly transform people&#39;s life in positive sustainable way.</p>
      
      <nav>
        <ul class="menu">
          
          <li><a href="../../post/">Home</a></li>
          
          <li><a href="../../tags/">Tags</a></li>
          
          <li><a href="../../categories/">Categories</a></li>
          
        </ul>
        <hr/>
      </nav>      
      
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/christianbitter" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://twitter.com/christi26164848" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Getting Fama French 3 Factor Data</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Mar 20, 2021
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          3 min read
        </div><div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="../../tags/r/">R</a><a class="tag" href="../../tags/finance/">Finance</a><a class="tag" href="../../tags/beginner/">beginner</a></div></div>
    </header>
    <div class="post-content">
      <p>When analyzing and making investments we typically have to face a trade-off between
how much risk (or uncertainty) we are going to allow to affect our investment,
and how strong our appetite for gains or returns is. Typically, we know that
an investment that has larger swings in either positive or negative direction
and an investment that has more of such swings is an investment that we would consider
as being riskier when compared to an investment that stays flatter overall
(e.g, less pronounced swings and less dynamic). For example, putting 10$ bill in
my pocket is less risky than putting it into a stock.</p>
<p>A famous benchmark data set that charts the historic performance/ risk of bonds
and stocks for the last 100 years or so, is the Fama French data set made available
by Professor Kenneth French. Actually, there is a multitude of different data sets
available on his website. But for the time being we focus on the 3 Factor data set.
The data set provides an historic aggregation over many stocks and bonds traded
by or on NYSE, AMEX, or NASDAQ. As such it serves as a perfect index to compare
your asset or portfolio to.</p>
<p>In order to use the data set in R, I wrote a small piece of code utilizing the
base and typical tidyverse packages, i.e. readr for reading a csv file, dplyr
for data engineering and lubridate for date handling.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">#&#39;@title Auxiliary Data</span>
<span style="color:#75715e">#&#39;@name ff_3f</span>
<span style="color:#75715e">#&#39;@author Christian Bitter</span>
<span style="color:#75715e">#&#39;@description Downloads the Fama French 3 Factor data set and structures it as</span>
<span style="color:#75715e">#&#39;monthly and yearly components. Each component provides the same factors</span>
<span style="color:#75715e">#&#39;More information about the data can be found Rm-Rf (the excess return on the market, value-weight return),</span>
<span style="color:#75715e">#&#39;SMB (Small minus big), HML (High minus Low) and Rf (risk free rate).</span>
<span style="color:#75715e">#&#39;here: \url{https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_factors.html}.</span>
<span style="color:#75715e">#&#39;@returns A list with two entries yearly and monthly representing the FF yearly</span>
<span style="color:#75715e">#&#39;and monthly aggregates.</span>
<span style="color:#75715e">#&#39;@export</span>
ff_3f <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>() {
  <span style="color:#a6e22e">library</span>(readr);
  <span style="color:#a6e22e">library</span>(dplyr);
  <span style="color:#a6e22e">library</span>(lubridate);

  fp <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors_CSV.zip&#34;</span>;
  temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tempfile</span>()
  <span style="color:#a6e22e">download.file</span>(fp, temp)
  temp_dir <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tempdir</span>();

  <span style="color:#a6e22e">unzip</span>(zipfile <span style="color:#f92672">=</span> temp, exdir <span style="color:#f92672">=</span> temp_dir);
  data_fp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">file.path</span>(temp_dir, <span style="color:#e6db74">&#34;F-F_Research_Data_Factors.CSV&#34;</span>);
  data_df <span style="color:#f92672">&lt;-</span> readr<span style="color:#f92672">::</span><span style="color:#a6e22e">read_csv</span>(data_fp, skip_empty_rows <span style="color:#f92672">=</span> T, skip <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>);
  <span style="color:#a6e22e">unlink</span>(temp_dir);
  <span style="color:#a6e22e">unlink</span>(temp);

  <span style="color:#75715e"># the original data contains the copyright in the last row, this will be empty</span>
  <span style="color:#75715e"># so skip it.</span>
  data_df <span style="color:#f92672">&lt;-</span> data_df[<span style="color:#f92672">-</span><span style="color:#a6e22e">nrow</span>(data_df), ];

  <span style="color:#75715e"># clean up the names</span>
  <span style="color:#a6e22e">names</span>(data_df) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;date&#34;</span>, <span style="color:#e6db74">&#34;RmxRf&#34;</span>, <span style="color:#e6db74">&#34;SMB&#34;</span>, <span style="color:#e6db74">&#34;HML&#34;</span>, <span style="color:#e6db74">&#34;Rf&#34;</span>);

  <span style="color:#75715e"># convert date from real to int</span>
  data_df <span style="color:#f92672">&lt;-</span> data_df <span style="color:#f92672">%&gt;%</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">mutate</span>(date <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.integer</span>(date));

  <span style="color:#75715e"># the file contains monthly and yearly aggregate, so pay attention</span>
  monthly_df <span style="color:#f92672">&lt;-</span> data_df <span style="color:#f92672">%&gt;%</span>
    dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">filter</span>(date <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">10000</span>) <span style="color:#f92672">%&gt;%</span>
    dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">mutate</span>(date <span style="color:#f92672">=</span> lubridate<span style="color:#f92672">::</span><span style="color:#a6e22e">ymd</span>(date, truncated <span style="color:#f92672">=</span> <span style="color:#ae81ff">1L</span>));

  <span style="color:#75715e"># since the yearly data is at most 2021 - we can filter out all rows &lt; 10000</span>
  yearly_df <span style="color:#f92672">&lt;-</span> data_df <span style="color:#f92672">%&gt;%</span>
    dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">filter</span>(date <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10000</span>) <span style="color:#f92672">%&gt;%</span>
    dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">mutate</span>(date <span style="color:#f92672">=</span> lubridate<span style="color:#f92672">::</span><span style="color:#a6e22e">ymd</span>(date, truncated <span style="color:#f92672">=</span> <span style="color:#ae81ff">2L</span>));

  <span style="color:#a6e22e">return</span>(<span style="color:#a6e22e">list</span>(
    <span style="color:#e6db74">&#34;yearly&#34;</span> <span style="color:#f92672">=</span> yearly_df,
    <span style="color:#e6db74">&#34;monthly&#34;</span> <span style="color:#f92672">=</span> monthly_df
  ));
}
</code></pre></div><p>You will also find the function in the latest update to the cbFinance package on
<a href="https://github.com/christianbitter/cbFinance">Github</a>.</p>

    </div>
    <div class="post-footer">
      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "christianbitter" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </article>

    </main>
  </body>
</html>
